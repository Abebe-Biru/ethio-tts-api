[phases.setup]
nixPkgs = ["python310", "libsndfile"]

[phases.install]
cmds = [
    "python -m pip install --upgrade pip",
    "python -m pip install setuptools wheel",
    "python -c \"import sys; print(sys.version)\"",
    "python -c \"import distutils; print('distutils available')\" || echo 'distutils not available'",
    "python -m pip install uv",
    "chmod +x install_cpu_torch.sh",
    "./install_cpu_torch.sh"
]

[phases.build]
cmds = []

[start]
cmd = "python -m api"